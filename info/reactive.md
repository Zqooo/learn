âœ¨reactiveæ¨¡å—
å®žçŽ°æ•°æ®ä»£ç†ï¼ŒåŽç»­æ“ä½œçš„æ˜¯ä»£ç†å¯¹è±¡ï¼Œé€šè¿‡ä»£ç†çš„å¯¹è±¡çš„getå’Œsetç‰¹æ€§è¿›è¡Œè¿›ä¸€æ­¥æ“ä½œ

    ðŸš© é—®é¢˜ï¼šå…ƒæ•°æ®é‡å¤ä»£ç†ï¼Œä»£ç†å¯¹è±¡é‡å¤ä»£ç†ï¼Œæ·±å±‚ä»£ç†

    ðŸŒ è§£å†³æ€è·¯ï¼š

    âš½ï¸ åˆ›å»ºreactiveMapè¡¨ï¼Œå·²ç»ä»£ç†çš„æ•°æ®å­˜æ”¾åˆ°è¡¨ä¸­ï¼Œåœ¨ä»£ç†å‰åˆ¤æ–­è¡¨ä¸­æ˜¯å¦å·²ç»å­˜æ”¾è¯¥æ•°æ®ï¼Œè‹¥å­˜æ”¾ï¼Œåˆ™è¡¨ç¤ºè¯¥æ•°æ®å·²ç»è¿›è¡Œä»£ç†ï¼Œæ— éœ€é‡å¤ä»£ç†ï¼Œä»Žè¡¨ä¸­å–å‡ºä»£ç†å¯¹è±¡è¿›è¡Œè¿”å›ž

    âš½ï¸ å·²ä»£ç†æ•°æ®åœ¨proxy.getä¸­è®¾ç½®é˜€é—¨(ReactiveFlags.IS_REACTIVE)ï¼Œè‹¥ç›®æ ‡æ•°æ®å·²è¢«ä»£ç†ï¼Œåˆ™è®¿é—®è¯¥é˜€å€¼æ—¶ï¼Œä¼šè¿”å›žtrueï¼ˆæœªä»£ç†çš„å…ƒæ•°æ®èº«ä¸Šæ²¡æœ‰è¯¥å±žæ€§ï¼Œåªä¼šè¿”å›žundefinedï¼‰ï¼Œé€šè¿‡é˜€å€¼åˆ¤æ–­ï¼Œç¡®å®šæ˜¯å¦ç»§ç»­è¿›è¡Œå¯¹è±¡ä»£ç†
    
    âš½ï¸ effectå–å€¼æ—¶ï¼Œproxyä¼šç»è¿‡geté€»è¾‘ï¼Œå–å€¼æ—¶åˆ¤æ–­æ˜¯å¦ä¸ºå¯¹è±¡ï¼Œè‹¥ä¸ºå¯¹è±¡ï¼Œåˆ™è¿›ä¸€æ­¥è¿›è¡Œæ•°æ®ä»£ç†ï¼ˆåœ¨ä»£ç†è¿‡ç¨‹ä¸­å°±æœ‰åˆ¤æ–­æ˜¯å¦å·²ç»ä»£ç†çš„é€»è¾‘

    ðŸš© ä»£ç†é…ç½®æ‹†åˆ†åœ¨baseHanlderæ¨¡å—ä¸­
    âš½ï¸ åœ¨getä¸­è°ƒç”¨trackå‡½æ•°è¿›è¡Œä¾èµ–æ”¶é›†
    âš½ï¸ åœ¨setä¸­è°ƒç”¨triggerå‡½æ•°é€šçŸ¥effectè°ƒç”¨
    
çŸ¥è¯†ç‚¹å­¦ä¹ ï¼š
    ðŸš© WeakMap
    Mapï¼ŒMapçš„keyå€¼å¯ä»¥è¢«æžšä¸¾ï¼Œè€Œæžšä¸¾çš„åŽŸç†åˆ™æ˜¯é€šè¿‡ä¸€ä¸ªæ•°ç»„å­˜å‚¨å¯¹åº”çš„keyå€¼

    å½¢æˆå¼ºå¼•ç”¨ï¼ŒMapçš„keyå€¼è¢«éåŽ†æ•°ç»„æ‰€å¼•ç”¨ï¼Œå¯¼è‡´keyå€¼åœ¨æ²¡æœ‰è¢«å¼•ç”¨æ—¶ä»æ— æ³•è¢«å›žæ”¶

    è€ŒWeakMapçš„keyå€¼ä¸å¯è¢«æžšä¸¾ï¼Œåº•å±‚æ²¡åšæžšä¸¾å®žçŽ°ï¼Œkeyå€¼åœ¨æ²¡ä»»ä½•å¼•ç”¨æ—¶ï¼Œèƒ½è¢«å›žæ”¶ï¼Œé¿å…å†…å­˜æ³„æ¼

    example: 
    let o1 = {a: 1}
    const wMap = new WeakMap()
    wMap.set(o1,{})
    // => å½“o1è®¾ä¸ºnullæ—¶ï¼Œ{a: 1}æ²¡æœ‰ä»»ä½•æŒ‡é’ˆæŒ‡å‘ï¼Œèƒ½è¢«åžƒåœ¾å›žæ”¶æœºåˆ¶ç³»ç»Ÿå¤„ç†
    wMap.has(o1) // undefined wMapä¸­æ²¡æœ‰o1è¿™ä¸ªé”®

    ðŸš© é…åˆtsä½¿ç”¨class
    constructor(public fn){}
    =>
    constructor(fn){
        this.fn = fn
    }